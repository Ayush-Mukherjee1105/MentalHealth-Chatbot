<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mental Health Chatbot</title>
  <style>
    body { font-family: sans-serif; background: #f5f5f5; margin: 0; display: flex; flex-direction: column; height: 100vh; }
    .chat { flex: 1; padding: 1rem; overflow-y: auto; }
    .bubble { max-width: 70%; margin: 0.5rem 0; padding: 0.8rem; border-radius: 1rem; line-height: 1.4; }
    .user { background: #0084ff; color: white; margin-left: auto; }
    .bot { background: #e0e0e0; color: #333; margin-right: auto; }
    .emotion { font-size: 0.8rem; color: #555; margin-top: 0.2rem; }
    .input-box { display: flex; padding: 1rem; background: white; }
    input { flex: 1; padding: 0.8rem; border: 1px solid #ddd; border-radius: 1rem; font-size: 1rem; }
    button { margin-left: 0.5rem; padding: 0.8rem 1.2rem; border: none; border-radius: 1rem; background: #0084ff; color: white; font-size: 1rem; cursor: pointer; }
  </style>
</head>
<body>

  <div class="chat" id="chat"></div>

  <div class="input-box">
    <input id="message" placeholder="Type your message..." />
    <button onclick="sendMessage()">Send</button>
  </div>

<script>
  const chat = document.getElementById('chat');

  function addBubble(text, sender, emotion='') {
    const div = document.createElement('div');
    div.className = `bubble ${sender}`;
    div.innerHTML = text;
    if (emotion) {
      const emo = document.createElement('div');
      emo.className = 'emotion';
      emo.textContent = `üß† Detected Emotion: ${emotion}`;
      div.appendChild(emo);
    }
    chat.appendChild(div);
    chat.scrollTop = chat.scrollHeight;
  }

  async function sendMessage() {
    const input = document.getElementById('message');
    const text = input.value.trim();
    if (!text) return;

    addBubble(text, 'user');
    input.value = '';

    // üü¢ Call your FastAPI backend (hosted on Vercel)
    const res = await fetch('https://your-vercel-url.vercel.app/chat', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ message: text })
    });
    const data = await res.json();

    if (data.response) {
      addBubble(data.response, 'bot', data.detected_emotion);
    } else {
      addBubble('‚ö†Ô∏è Error occurred.', 'bot');
    }
  }
</script>

</body>
</html>
